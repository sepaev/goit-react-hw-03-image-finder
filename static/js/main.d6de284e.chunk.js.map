{"version":3,"sources":["components/SearchBar/SearchBar.styled.jsx","components/SearchBar/SearchBar.jsx","components/ImageGallery/ImageGallery.styled.jsx","components/Button/Button.styled.jsx","components/Button/Button.jsx","constants/constants.js","components/ImageGalleryItem/ImageGalleryItem.styled.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Modal/Modal.styled.jsx","components/Modal/Modal.jsx","components/ImageGallery/ImageGallery.jsx","components/App/App.styled.jsx","components/App/App.jsx","reportWebVitals.js","index.js"],"names":["SearchBarHeader","styled","header","SearchForm","form","SearchButton","button","SearchButtonSpan","span","SearchInput","input","SearchBar","state","query","handleQueryChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","alert","this","type","className","autocomplete","name","autoFocus","placeholder","onChange","Component","ImageGalleryUl","ul","LoadMoreButton","Button","title","onClick","PER_PAGE","ImageGalleryItemLi","li","ImageGalleryItemImg","img","ImageGalleryItem","id","src","alt","loading","OverlayDiv","div","ModalDiv","ModalImg","Modal","onTapped","modalImages","prev","next","console","log","key","exitFunc","changeNeighbors","onClickModal","target","nodeName","window","addEventListener","removeEventListener","curr","largeImageURL","tags","axios","defaults","baseURL","ImageGallery","pages","total","hits","newRequest","page","error","modalIsOpen","toggleModal","currentId","images","getNeighbors","prevState","i","length","toString","getStringOptions","options","getOptions","q","image_type","orientation","safesearch","per_page","stringOptions","getResponse","a","get","response","status","Promise","reject","Error","getClearStateObject","loadMore","nextPage","componentDidUpdate","prevProps","propsQuery","doChangeStatus","changeStatus","then","data","parseInt","newState","setTimeout","scrollTo","top","document","documentElement","scrollHeight","behavior","map","webformatURL","uuidv4","AppSection","section","InfoDiv","InfoH1","h1","App","handleFormSubmit","newStatus","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d6de284e.chunk.js","sourcesContent":["import styled from '@emotion/styled';\r\n\r\nexport const SearchBarHeader = styled.header`\r\n  top: 0;\r\n  left: 0;\r\n  position: sticky;\r\n  z-index: 1100;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 64px;\r\n  padding-right: 24px;\r\n  padding-left: 24px;\r\n  padding-top: 12px;\r\n  padding-bottom: 12px;\r\n  color: #fff;\r\n  background-color: #3f51b5;\r\n  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14),\r\n    0px 1px 10px 0px rgba(0, 0, 0, 0.12);\r\n`;\r\n\r\nexport const SearchForm = styled.form`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  max-width: 600px;\r\n  background-color: #fff;\r\n  border-radius: 3px;\r\n  overflow: hidden;\r\n`;\r\n\r\nexport const SearchButton = styled.button`\r\n  display: inline-block;\r\n  width: 48px;\r\n  height: 48px;\r\n  border: 0;\r\n  background-image: url('https://image.flaticon.com/icons/svg/149/149852.svg');\r\n  background-size: 40%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  opacity: 0.6;\r\n  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\r\n  cursor: pointer;\r\n  outline: none;\r\n  &:hover {\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\nexport const SearchButtonSpan = styled.span`\r\n  position: absolute;\r\n  width: 1px;\r\n  height: 1px;\r\n  padding: 0;\r\n  overflow: hidden;\r\n  clip: rect(0, 0, 0, 0);\r\n  white-space: nowrap;\r\n  clip-path: inset(50%);\r\n  border: 0;\r\n`;\r\n\r\nexport const SearchInput = styled.input`\r\n  display: inline-block;\r\n  width: 100%;\r\n  font: inherit;\r\n  font-size: 20px;\r\n  border: none;\r\n  outline: none;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n  &::placeholder {\r\n    font: inherit;\r\n    font-size: 18px;\r\n  }\r\n`;\r\n","import { Component } from 'react';\r\nimport {\r\n  SearchBarHeader,\r\n  SearchForm,\r\n  SearchButton,\r\n  SearchButtonSpan,\r\n  SearchInput,\r\n} from './SearchBar.styled';\r\n// import { FaBeer } from 'react-icons/fa';\r\n\r\nclass SearchBar extends Component {\r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleQueryChange = e => {\r\n    this.setState({ query: e.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    const query = this.state.query.trim();\r\n    if (!query) {\r\n      alert('введите название картинки');\r\n      return;\r\n    }\r\n    this.props.onSubmit(query);\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <SearchBarHeader>\r\n        <SearchForm onSubmit={this.handleSubmit}>\r\n          <SearchButton type='submit'>\r\n            <SearchButtonSpan>Search</SearchButtonSpan>\r\n          </SearchButton>\r\n\r\n          <SearchInput\r\n            className='SearchForm-input'\r\n            type='text'\r\n            autocomplete='off'\r\n            name='pictureName'\r\n            autoFocus\r\n            placeholder='Search images and photos'\r\n            value={this.state.query}\r\n            onChange={this.handleQueryChange}\r\n          />\r\n        </SearchForm>\r\n      </SearchBarHeader>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBar;\r\n","import styled from '@emotion/styled';\r\n\r\nexport const ImageGalleryUl = styled.ul`\r\n  display: grid;\r\n  max-width: calc(100vw - 48px);\r\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\r\n  grid-gap: 16px;\r\n  margin-top: 0;\r\n  margin-bottom: 0;\r\n  padding: 0;\r\n  list-style: none;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n`;\r\n","import styled from '@emotion/styled';\r\n\r\nexport const LoadMoreButton = styled.button`\r\n  padding: 8px 16px;\r\n  border-radius: 2px;\r\n  background-color: #3f51b5;\r\n  transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);\r\n  text-align: center;\r\n  display: inline-block;\r\n  color: #fff;\r\n  border: 0;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n  font-family: inherit;\r\n  font-size: 18px;\r\n  line-height: 24px;\r\n  font-style: normal;\r\n  font-weight: 500;\r\n  min-width: 180px;\r\n  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14),\r\n    0px 1px 5px 0px rgba(0, 0, 0, 0.12);\r\n  &:hover,\r\n  &:focus {\r\n    background-color: #303f9f;\r\n  }\r\n`;\r\n","import { LoadMoreButton } from './Button.styled';\r\n\r\nconst Button = ({ title, onClick }) => {\r\n  return <LoadMoreButton onClick={onClick}>{title}</LoadMoreButton>;\r\n};\r\n\r\nexport default Button;\r\n","export const API_KEY = \"22594439-4316377fda5f0b6c1b052f095\";\nexport const API_URL = \"https://pixabay.com/api/\";\nexport const IMAGE_TYPE = \"photo\";\nexport const ORIENTATION = \"horizontal\";\nexport const SAFESEARCH = \"false\";\nexport const PER_PAGE = 12;\n","import styled from '@emotion/styled';\r\n\r\nexport const ImageGalleryItemLi = styled.li`\r\n  border-radius: 2px;\r\n  box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14),\r\n    0px 2px 1px -1px rgba(0, 0, 0, 0.12);\r\n`;\r\n\r\nexport const ImageGalleryItemImg = styled.img`\r\n  width: 100%;\r\n  height: 260px;\r\n  object-fit: cover;\r\n  transition: transform 250ms cubic-bezier(0.4, 0, 0.2, 1);\r\n  &:hover {\r\n    transform: scale(1.03);\r\n    cursor: zoom-in;\r\n  }\r\n`;\r\n","import { ImageGalleryItemImg, ImageGalleryItemLi } from './ImageGalleryItem.styled';\r\n\r\nconst ImageGalleryItem = ({ id, src, alt, onClick }) => {\r\n  return (\r\n    <ImageGalleryItemLi>\r\n      <ImageGalleryItemImg src={src} alt={alt} id={id} loading='lazy' onClick={onClick} />\r\n    </ImageGalleryItemLi>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import styled from '@emotion/styled';\r\n\r\nexport const OverlayDiv = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: rgba(0, 0, 0, 0.8);\r\n  z-index: 1200;\r\n`;\r\nexport const ModalDiv = styled.div`\r\n  max-width: calc(100vw - 48px);\r\n  max-height: calc(100vh - 24px);\r\n`;\r\nexport const ModalImg = styled.img`\r\n  width: 100%auto;\r\n`;\r\n","import { Component } from 'react';\r\nimport { OverlayDiv, ModalDiv, ModalImg } from './Modal.styled';\r\n\r\nclass Modal extends Component {\r\n  onTapped = e => {\r\n    const { prev, next } = this.props.modalImages;\r\n    e.preventDefault();\r\n    console.log(e);\r\n    if (e.key === 'Escape') this.props.exitFunc();\r\n    if (e.key === 'ArrowLeft') this.props.changeNeighbors(prev.id);\r\n    if (e.key === 'ArrowRight') this.props.changeNeighbors(next.id);\r\n  };\r\n  componentDidMount() {\r\n    console.log('mount');\r\n    window.addEventListener('keydown', this.onTapped);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.onTapped);\r\n  }\r\n  onClickModal = e => {\r\n    if (e.target.nodeName === 'DIV') this.props.exitFunc();\r\n  };\r\n  render() {\r\n    const { curr } = this.props.modalImages;\r\n    return (\r\n      <OverlayDiv onClick={this.onClickModal}>\r\n        <ModalDiv>\r\n          <ModalImg src={curr.largeImageURL} alt={curr.tags} />\r\n        </ModalDiv>\r\n      </OverlayDiv>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import { Component } from 'react';\r\nimport { ImageGalleryUl } from './ImageGallery.styled';\r\nimport Button from '../Button/Button';\r\nimport axios from 'axios';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport {\r\n  API_KEY,\r\n  API_URL,\r\n  IMAGE_TYPE,\r\n  ORIENTATION,\r\n  SAFESEARCH,\r\n  PER_PAGE,\r\n} from '../../constants/constants';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport Modal from '../Modal/Modal';\r\naxios.defaults.baseURL = `${API_URL}`;\r\n\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    pages: 0,\r\n    total: 0,\r\n    hits: null,\r\n    query: '',\r\n    newRequest: true,\r\n    page: 1,\r\n    error: null,\r\n    modalIsOpen: false,\r\n    modalImages: null,\r\n  };\r\n\r\n  toggleModal = e => {\r\n    if (e) {\r\n      e.preventDefault();\r\n      const currentId = e.target.id;\r\n      const images = this.getNeighbors(currentId);\r\n      this.setState(prevState => {\r\n        return { modalIsOpen: !prevState.modalIsOpen, modalImages: images };\r\n      });\r\n    } else {\r\n      this.setState(prevState => {\r\n        return { modalIsOpen: !prevState.modalIsOpen, modalImages: null };\r\n      });\r\n    }\r\n  };\r\n\r\n  changeNeighbors = id => {\r\n    const images = this.getNeighbors(id);\r\n    this.setState(prevState => {\r\n      return { modalImages: images };\r\n    });\r\n  };\r\n  getNeighbors = id => {\r\n    console.log(id);\r\n    if (this.state.hits) {\r\n      const hits = this.state.hits;\r\n      for (let i = 0; i < hits.length; i++) {\r\n        if (hits[i].id.toString() === id.toString()) {\r\n          console.log(hits[i].id + ' - ' + id);\r\n          const prev = i === 0 ? hits[hits.length - 1] : hits[i - 1];\r\n          const next = i === hits.length - 1 ? hits[0] : hits[i + 1];\r\n          const curr = hits[i];\r\n          return { prev, curr, next };\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n  getOptions(query) {\r\n    return {\r\n      key: API_KEY,\r\n      q: query,\r\n      image_type: IMAGE_TYPE,\r\n      orientation: ORIENTATION,\r\n      safesearch: SAFESEARCH,\r\n      per_page: PER_PAGE,\r\n      page: this.state.page,\r\n    };\r\n  }\r\n  getStringOptions = query => {\r\n    const options = this.getOptions(query);\r\n    const { key, q, image_type, orientation, safesearch, per_page, page } = options;\r\n    if (!key || !q) return '';\r\n\r\n    let stringOptions = '?';\r\n    stringOptions += 'key=' + key;\r\n    stringOptions += '&q=' + q;\r\n    if (image_type) stringOptions += '&image_type=' + image_type;\r\n    if (orientation) stringOptions += '&orientation=' + orientation;\r\n    if (safesearch) stringOptions += '&safesearch=' + safesearch;\r\n    if (per_page) stringOptions += '&per_page=' + per_page;\r\n    if (page) stringOptions += '&page=' + page;\r\n\r\n    return stringOptions;\r\n  };\r\n\r\n  getResponse = async query => {\r\n    const options = this.getStringOptions(query);\r\n    try {\r\n      const response = await axios.get(options);\r\n      if (response.status === 200) {\r\n        return response;\r\n      } else {\r\n        return Promise.reject(new Error('Error - ' + response.status));\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      // this.updateState(error, 'rejected');\r\n    }\r\n  };\r\n\r\n  getClearStateObject = (query, newRequest = false) => {\r\n    return {\r\n      pages: 0,\r\n      total: 0,\r\n      hits: null,\r\n      query: query,\r\n      newRequest: newRequest,\r\n      page: 1,\r\n      error: null,\r\n      modalIsOpen: false,\r\n    };\r\n  };\r\n  loadMore = () => {\r\n    const nextPage = this.state.page + 1;\r\n    // if (nextPage > this.state.pages) alert('no more pages');\r\n    this.setState({ page: nextPage, newRequest: true });\r\n  };\r\n\r\n  componentDidUpdate = async (prevProps, prevState) => {\r\n    const propsQuery = this.props.query;\r\n    const doChangeStatus = this.props.changeStatus;\r\n    const { query, newRequest, page } = this.state;\r\n\r\n    if (propsQuery !== query && newRequest === false) {\r\n      this.setState(this.getClearStateObject(propsQuery, true));\r\n      return;\r\n    }\r\n    //если новый запрос\r\n    if (newRequest) {\r\n      doChangeStatus('pending');\r\n      const newState = await this.getResponse(propsQuery)\r\n        .then(response => response.data)\r\n        .then(({ total, hits }) => {\r\n          if (total > 0) {\r\n            //найдено картинки\r\n            doChangeStatus('resolved');\r\n            const pages = total % PER_PAGE > 0 ? parseInt(total / PER_PAGE) + 1 : total / PER_PAGE;\r\n            return {\r\n              pages,\r\n              total,\r\n              hits: prevState.hits ? [...prevState.hits, ...hits] : [...hits],\r\n              query: propsQuery,\r\n              newRequest: false,\r\n              page,\r\n              error: null,\r\n            };\r\n          }\r\n          //не найдено картинки\r\n          doChangeStatus('idle');\r\n          return this.getClearStateObject(propsQuery, false);\r\n        });\r\n      //запись в стейт нового обьекта\r\n      this.setState(newState);\r\n      // if (this.state.total > PER_PAGE) {\r\n      window.setTimeout(e => {\r\n        window.scrollTo({\r\n          top: document.documentElement.scrollHeight,\r\n          behavior: 'smooth',\r\n        });\r\n      }, 300);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { hits } = this.state;\r\n    return (\r\n      <>\r\n        <ImageGalleryUl>\r\n          {hits !== null &&\r\n            hits.map(({ id, webformatURL, largeImageURL, tags }) => {\r\n              return (\r\n                <ImageGalleryItem\r\n                  key={uuidv4()}\r\n                  id={id}\r\n                  src={webformatURL}\r\n                  alt={tags}\r\n                  onClick={this.toggleModal}\r\n                />\r\n              );\r\n            })}\r\n        </ImageGalleryUl>\r\n        {this.state.pages > this.state.page && (\r\n          <Button title={`load more ${PER_PAGE} pictures`} onClick={this.loadMore} />\r\n        )}\r\n        {this.state.modalIsOpen && (\r\n          <Modal\r\n            modalImages={this.state.modalImages}\r\n            exitFunc={this.toggleModal}\r\n            changeNeighbors={this.changeNeighbors}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import styled from '@emotion/styled';\r\n\r\nexport const AppSection = styled.section`\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  grid-gap: 16px;\r\n  padding-bottom: 24px;\r\n  margin-top: 0;\r\n`;\r\n\r\nexport const InfoDiv = styled.div`\r\n  position: fixed;\r\n  top: 40%;\r\n  text-align: center;\r\n  margin: 50px auto;\r\n  font-size: 50px;\r\n  font-weight: 800;\r\n  color: lightgrey;\r\n  filter: drop-shadow(2px 4px 6px black);\r\n`;\r\n\r\nexport const InfoH1 = styled.h1`\r\n  color: black;\r\n  margin-top: 0;\r\n`;\r\n","import SearchBar from '../SearchBar/SearchBar';\nimport ImageGallery from '../ImageGallery/ImageGallery';\nimport { AppSection, InfoDiv, InfoH1 } from './App.styled';\nimport { Component } from 'react';\n\nclass App extends Component {\n  state = {\n    status: 'idle',\n    query: '',\n  };\n\n  handleFormSubmit = query => {\n    this.setState({ status: 'resolved', query });\n  };\n\n  changeStatus = newStatus => {\n    if (this.state.status !== newStatus) {\n      this.setState({ status: newStatus });\n    }\n  };\n\n  render() {\n    const { query } = this.state;\n    return (\n      <AppSection>\n        <SearchBar onSubmit={this.handleFormSubmit} />\n        {this.state.status === 'idle' && (\n          <InfoDiv>\n            {query && <InfoH1>Sorry, {query} not found</InfoH1>}\n            Waiting for you to start new searching\n          </InfoDiv>\n        )}\n        <ImageGallery query={query} changeStatus={this.changeStatus} />\n        {this.state.status === 'rejected' && <InfoDiv>Error</InfoDiv>}\n        {this.state.status === 'pending' && <InfoDiv>Searching for a {query}...</InfoDiv>}\n      </AppSection>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App/App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}