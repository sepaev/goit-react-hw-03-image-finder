{"version":3,"sources":["components/SearchBar/SearchBar.styled.jsx","components/SearchBar/SearchBar.jsx","components/ImageGallery/ImageGallery.styled.jsx","constants/constants.js","components/ImageGallery/ImageGallery.jsx","components/App/App.styled.jsx","components/App/App.jsx","reportWebVitals.js","index.js"],"names":["SearchBarHeader","styled","header","SearchForm","form","SearchButton","button","SearchButtonSpan","span","SearchInput","input","SearchBar","state","query","handleQueryChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","alert","this","type","className","autocomplete","name","autoFocus","placeholder","onChange","Component","ImageGalleryUl","ul","API_URL","ImageGallery","pages","total","hits","getStringOptions","options","key","q","image_type","orientation","safesearch","per_page","page","stringOptions","getResponse","a","getOptions","axios","defaults","baseURL","get","response","console","log","componentDidUpdate","prevProps","prevState","prevQuery","nextQuery","changeStatus","JSON","stringify","then","data","parseInt","map","src","previewURL","alt","tags","AppSection","section","App","status","searchResult","error","handleFormSubmit","newStatus","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.820898fa.chunk.js","sourcesContent":["import styled from '@emotion/styled';\r\n\r\nexport const SearchBarHeader = styled.header`\r\n  top: 0;\r\n  left: 0;\r\n  position: sticky;\r\n  z-index: 1100;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 64px;\r\n  padding-right: 24px;\r\n  padding-left: 24px;\r\n  padding-top: 12px;\r\n  padding-bottom: 12px;\r\n  color: #fff;\r\n  background-color: #3f51b5;\r\n  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14),\r\n    0px 1px 10px 0px rgba(0, 0, 0, 0.12);\r\n`;\r\n\r\nexport const SearchForm = styled.form`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  max-width: 600px;\r\n  background-color: #fff;\r\n  border-radius: 3px;\r\n  overflow: hidden;\r\n`;\r\n\r\nexport const SearchButton = styled.button`\r\n  display: inline-block;\r\n  width: 48px;\r\n  height: 48px;\r\n  border: 0;\r\n  background-image: url('https://image.flaticon.com/icons/svg/149/149852.svg');\r\n  background-size: 40%;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n  opacity: 0.6;\r\n  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\r\n  cursor: pointer;\r\n  outline: none;\r\n  &:hover {\r\n    opacity: 1;\r\n  }\r\n`;\r\n\r\nexport const SearchButtonSpan = styled.span`\r\n  position: absolute;\r\n  width: 1px;\r\n  height: 1px;\r\n  padding: 0;\r\n  overflow: hidden;\r\n  clip: rect(0, 0, 0, 0);\r\n  white-space: nowrap;\r\n  clip-path: inset(50%);\r\n  border: 0;\r\n`;\r\n\r\nexport const SearchInput = styled.input`\r\n  display: inline-block;\r\n  width: 100%;\r\n  font: inherit;\r\n  font-size: 20px;\r\n  border: none;\r\n  outline: none;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n  &::placeholder {\r\n    font: inherit;\r\n    font-size: 18px;\r\n  }\r\n`;\r\n","import { Component } from 'react';\r\nimport {\r\n  SearchBarHeader,\r\n  SearchForm,\r\n  SearchButton,\r\n  SearchButtonSpan,\r\n  SearchInput,\r\n} from './SearchBar.styled';\r\n// import { FaBeer } from 'react-icons/fa';\r\n\r\nclass SearchBar extends Component {\r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleQueryChange = e => {\r\n    this.setState({ query: e.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    const query = this.state.query.trim();\r\n    if (!query) {\r\n      alert('введите название картинки');\r\n      return;\r\n    }\r\n    this.props.onSubmit(query);\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <SearchBarHeader>\r\n        <SearchForm onSubmit={this.handleSubmit}>\r\n          <SearchButton type='submit'>\r\n            <SearchButtonSpan>Search</SearchButtonSpan>\r\n          </SearchButton>\r\n\r\n          <SearchInput\r\n            className='SearchForm-input'\r\n            type='text'\r\n            autocomplete='off'\r\n            name='pictureName'\r\n            autoFocus\r\n            placeholder='Search images and photos'\r\n            value={this.state.query}\r\n            onChange={this.handleQueryChange}\r\n          />\r\n        </SearchForm>\r\n      </SearchBarHeader>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBar;\r\n","import styled from '@emotion/styled';\r\n\r\nexport const ImageGalleryUl = styled.ul`\r\n  display: grid;\r\n  max-width: calc(100vw - 48px);\r\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\r\n  grid-gap: 16px;\r\n  margin-top: 0;\r\n  margin-bottom: 0;\r\n  padding: 0;\r\n  list-style: none;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n`;\r\n","export const API_KEY = \"22594439-4316377fda5f0b6c1b052f095\";\nexport const API_URL = \"https://pixabay.com/api/\";\n","import { Component } from 'react';\r\nimport { ImageGalleryUl } from './ImageGallery.styled';\r\nimport axios from 'axios';\r\nimport { API_KEY, API_URL } from '../../constants/constants';\r\n\r\nclass ImageGallery extends Component {\r\n  state = { pages: 0, total: 0, hits: null };\r\n\r\n  getOptions(query) {\r\n    return {\r\n      key: API_KEY,\r\n      q: query,\r\n      image_type: 'photo',\r\n      orientation: 'horizontal',\r\n      safesearch: 'true',\r\n      per_page: 40,\r\n      page: this.state.page,\r\n    };\r\n  }\r\n  getStringOptions = options => {\r\n    const { key, q, image_type, orientation, safesearch, per_page, page } = options;\r\n    if (!key || !q) return '';\r\n\r\n    let stringOptions = '?';\r\n    stringOptions += 'key=' + key;\r\n    stringOptions += '&q=' + q;\r\n    if (image_type) stringOptions += '&image_type=' + image_type;\r\n    if (orientation) stringOptions += '&orientation=' + orientation;\r\n    if (safesearch) stringOptions += '&safesearch=' + safesearch;\r\n    if (per_page) stringOptions += '&per_page=' + per_page;\r\n    if (page) stringOptions += '&page=' + page;\r\n\r\n    return stringOptions;\r\n  };\r\n\r\n  getResponse = async query => {\r\n    const options = this.getOptions(query);\r\n    const stringOptions = this.getStringOptions(options);\r\n    axios.defaults.baseURL = `${API_URL}`;\r\n    try {\r\n      const response = await axios.get(stringOptions);\r\n      return response;\r\n    } catch (error) {\r\n      console.log(error);\r\n      // this.updateState(error, 'rejected');\r\n    }\r\n  };\r\n\r\n  componentDidUpdate = async (prevProps, prevState) => {\r\n    const prevQuery = prevProps.query;\r\n    const nextQuery = this.props.query;\r\n    const changeStatus = this.props.changeStatus;\r\n    if (JSON.stringify(prevState) === JSON.stringify(this.state) && prevQuery === nextQuery) {\r\n      console.log('return');\r\n    } else {\r\n      console.log(prevQuery + ' - ' + nextQuery);\r\n\r\n      changeStatus('pending');\r\n      if (nextQuery) {\r\n        const data = await this.getResponse(nextQuery)\r\n          .then(response => response.data)\r\n          .then(({ total, hits }) => {\r\n            changeStatus('resolved');\r\n            if (total > 0) {\r\n              const pages = total % 40 > 0 ? parseInt(total / 40) + 1 : total / 40;\r\n              console.log('pages ' + pages);\r\n              console.log('total ' + total);\r\n              console.log(hits);\r\n              return { pages, total, hits: [...hits] };\r\n            }\r\n            return { pages: 0, total: 0, hits: null };\r\n          });\r\n        this.setState(data);\r\n      }\r\n    }\r\n  };\r\n  render() {\r\n    // const { pictures, page } = this.props;\r\n    // if (pictures.children) return;\r\n    // console.dir(this.props);\r\n    const { pages, total, hits } = this.state;\r\n    return (\r\n      <ImageGalleryUl>\r\n        {hits &&\r\n          hits.map(hits => {\r\n            return (\r\n              <li>\r\n                <img src={hits.previewURL} alt={hits.tags} />\r\n              </li>\r\n            );\r\n          })}\r\n      </ImageGalleryUl>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGallery;\r\n","import styled from '@emotion/styled';\r\n\r\nexport const AppSection = styled.section`\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  grid-gap: 16px;\r\n  padding-bottom: 24px;\r\n`;\r\n","import SearchBar from '../SearchBar/SearchBar';\nimport ImageGallery from '../ImageGallery/ImageGallery';\nimport { AppSection } from './App.styled';\nimport { API_KEY, API_URL } from '../../constants/constants';\n\nimport { Component } from 'react';\n\nclass App extends Component {\n  state = {\n    status: 'idle',\n    page: 1,\n    query: '',\n    searchResult: null,\n    error: '',\n  };\n\n  handleFormSubmit = query => {\n    console.log('query - ' + query);\n    this.setState({ status: 'resolved', query });\n  };\n\n  changeStatus = newStatus => {\n    if (this.state.status !== newStatus) {\n      this.setState({ status: newStatus });\n    }\n  };\n\n  // 'idle';\n  // 'pending';\n  // 'resolved';\n  // 'rejected';\n\n  // updateState(data, status) {\n  //   if (!data) return;\n  //   console.dir(data);\n  //   if (status === 'pending') {\n  //     this.setState(({ status, searchResult }) => {\n  //       if (status !== 'pending') {\n  //         return { status: 'pending', query: data.query, page: 1, searchResult };\n  //       }\n  //       return;\n  //     });\n  //   }\n\n  //   if (status === 'resolved') {\n  //     this.setState(({ status }) => {\n  //       if (status !== 'resolved') {\n  //         return {\n  //           status: 'resolved',\n  //           searchResult: data.hits,\n  //         };\n  //       }\n  //     });\n  //   }\n  // }\n  // componentDidMount() {\n  //   console.log('mount - ' + this.state.query);\n  //   if (this.state.query) {\n  //     this.setState({ status: 'pending' });\n  //     this.getResponse()\n  //       .then(response => response.data)\n  //       .then(({ total, hits }) => {\n  //         if (total > 0) {\n  //           const pages = total % 40 > 0 ? parseInt(total / 40) + 1 : total / 40;\n  //           console.log(pages);\n  //           console.log(total);\n  //           console.log(hits);\n  //           this.setState({ status: 'resolved', searchResult: { pages, total, hits } });\n  //         }\n  //       });\n  //   }\n  // }\n\n  render() {\n    return (\n      <AppSection>\n        <SearchBar onSubmit={this.handleFormSubmit} />\n        {this.state.status === 'idle' && <div>Initial</div>}\n        {this.state.status === 'pending' && <div>Pending for {this.state.query}...</div>}\n        <ImageGallery query={this.state.query} changeStatus={this.changeStatus} />\n        {this.state.status === 'rejected' && <div>Error</div>}\n      </AppSection>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App/App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}